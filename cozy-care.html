<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Starry Night â€” For Divanshi</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Patrick+Hand&display=swap" rel="stylesheet">

<style>
  :root{
    --bg-deep-1:#02061a;
    --bg-deep-2:#07112a;
    --accentA:#ff78b2;
    --accentB:#ff57a0;
    --glass: rgba(255,255,255,0.04);
    --muted:#b07aa6;
    --soft-white: rgba(255, 245, 255, 0.94);
    --affirm-accent: rgba(255,120,180,0.14);
  }

  /* page base */
  html,body { height:100%; margin:0; background: linear-gradient(180deg, var(--bg-deep-1) 0%, var(--bg-deep-2) 60%, #020318 100%); color:var(--soft-white); font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; overflow:auto; }

  /* full-screen star canvas sits behind everything */
  #starfield { position:fixed; inset:0; z-index:0; display:block; }

  /* dreamy nebula overlays (warmer glow + richer) */
  .nebula {
    position:fixed; inset:0; pointer-events:none; z-index:1;
    background:
      radial-gradient(900px 420px at 12% 22%, rgba(255,140,190,0.065), transparent 10%),
      radial-gradient(700px 450px at 85% 78%, rgba(80,100,220,0.05), transparent 10%),
      radial-gradient(600px 320px at 50% 40%, rgba(255,255,255,0.02), transparent 18%);
    mix-blend-mode: screen;
    opacity:0.96;
    filter:blur(16px) saturate(120%);
  }

  /* subtle vignette / depth */
  .vignette { position:fixed; inset:0; z-index:2; pointer-events:none;
    background: radial-gradient(1200px 700px at 50% 30%, rgba(0,0,0,0.06), transparent 20%),
                linear-gradient(180deg, rgba(0,0,0,0.14), rgba(0,0,0,0.34));
    mix-blend-mode:multiply; }

  /* main layout stage */
  .stage {
    position:relative;
    z-index:3;
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:28px;
    box-sizing:border-box;
  }

  /* central card */
  .card {
    width:100%;
    max-width:1040px;
    display:grid;
    grid-template-columns: 1fr 380px;
    gap:26px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:18px;
    padding:28px;
    box-shadow: 0 36px 120px rgba(2,6,26,0.75), inset 0 1px 0 rgba(255,255,255,0.02);
    border: 1px solid rgba(255,255,255,0.03);
    backdrop-filter: blur(8px) saturate(120%);
    align-items:start;
  }

  @media (max-width:980px) {
    .card { grid-template-columns: 1fr; padding:20px; gap:18px; margin: 12px; }
  }

  /* left: breathing area */
  .breath-wrap { display:flex; flex-direction:column; align-items:center; gap:18px; padding:6px 4px; }
  h1.title { font-family: 'Patrick Hand', cursive; font-size:clamp(1.6rem,4vw,2.6rem); margin:6px 0 0; color:var(--accentA); text-shadow: 0 10px 44px rgba(255,90,160,0.08); letter-spacing:0.6px; }
  p.lead { margin:0; color:var(--muted); font-weight:500; max-width:680px; text-align:center; }

  .breath-stage {
    width:360px; height:360px; border-radius:999px; display:grid; place-items:center;
    background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.02), rgba(10,24,50,0.12) 40%);
    box-shadow: 0 30px 80px rgba(6,10,30,0.66), inset 0 6px 22px rgba(255,255,255,0.02);
    position:relative; overflow:visible;
    transition: transform .4s ease;
  }

  @media (max-width:920px){ .breath-stage { width:300px; height:300px; } }
  @media (max-width:560px){ .breath-stage { width:240px; height:240px; } }

  /* animated breathing orb */
  .breath-orb {
    width:200px; height:200px; border-radius:999px; display:flex; align-items:center; justify-content:center;
    background: radial-gradient(circle at 35% 28%, rgba(255,240,250,0.06), rgba(10,24,50,0.12) 80%);
    box-shadow: 0 36px 120px rgba(255,120,180,0.06), 0 10px 36px rgba(0,0,0,0.55), inset 0 10px 26px rgba(255,255,255,0.02);
    transition: transform 4000ms cubic-bezier(.2,.9,.2,1), box-shadow .7s;
    will-change: transform;
  }

  .breath-orb.small { transform: scale(0.78); transition-duration:4000ms; box-shadow: 0 20px 48px rgba(0,0,0,0.46); }
  .breath-orb.big   { transform: scale(1.18); transition-duration:7000ms; box-shadow: 0 40px 140px rgba(255,120,180,0.07); }

  .orb-label { text-align:center; pointer-events:none; font-weight:800; color:#ffdff8; font-size:1.05rem; text-shadow:0 6px 30px rgba(0,0,0,0.6); letter-spacing:0.2px; }

  /* controls */
  .controls { display:flex; gap:12px; align-items:center; flex-wrap:wrap; justify-content:center; margin-top:6px; }
  .btn {
    padding:12px 18px; border-radius:999px; border:0; cursor:pointer; font-weight:800; font-size:1rem;
    background: linear-gradient(90deg, var(--accentA), var(--accentB)); color:#120218;
    box-shadow: 0 12px 30px rgba(255,90,160,0.14);
    transition: transform .18s, box-shadow .18s;
  }
  .btn:active{ transform: translateY(1px) scale(.996); }
  .btn.secondary { background:transparent; color:var(--soft-white); border:1px solid rgba(255,255,255,0.04); box-shadow:none; }

  .btn:focus{ outline: none; box-shadow: 0 0 0 6px rgba(255,120,180,0.08); }

  .meta { color:var(--muted); font-size:0.98rem; text-align:center; margin-top:6px; }

  /* affirmations (right) â€” made more visible */
  .affirm-wrap { display:flex; flex-direction:column; gap:16px; justify-content:flex-start; align-items:stretch; }

  .affirm-card {
    padding:22px; border-radius:14px;
    background: linear-gradient(135deg, rgba(255,255,255,0.028), rgba(255,255,255,0.012));
    border-left: 4px solid var(--affirm-accent);
    box-shadow: 0 22px 70px rgba(0,0,0,0.55), 0 6px 20px rgba(255,120,180,0.02);
    min-height:140px; display:flex; flex-direction:column; justify-content:center; align-items:center;
    backdrop-filter: blur(6px) saturate(110%);
  }

  .affirm-text {
    font-weight:900; text-align:center; font-size:1.15rem; color:#fff; line-height:1.28;
    text-shadow: 0 10px 36px rgba(0,0,0,0.6);
    letter-spacing:0.2px;
  }

  .small-muted { color:var(--muted); font-size:0.95rem; text-align:center; margin-top:8px; }

  .affirm-card .controls { justify-content:center; padding-top:8px; }

  /* make the affirm container stand out on mobile: sticky + slightly brighter */
  @media (max-width:980px){
    .affirm-card { min-height:120px; padding:18px; }
    .affirm-text { font-size:1.08rem; }
  }

  @media (max-width:560px){
    .card { gap:14px; padding:18px; }
    .affirm-card {
      position: sticky;
      bottom: 18px;
      z-index:6;
      margin: 0 -6px 0 -6px;
      border-radius:12px;
      background: linear-gradient(135deg, rgba(255,255,255,0.04), rgba(255,255,255,0.014));
      box-shadow: 0 28px 80px rgba(0,0,0,0.6);
      border-left-width:6px;
    }
    .affirm-text { font-size:1.08rem; }
    .btn { padding:12px 16px; font-size:0.98rem; }
  }

  /* small twinkly star elements for UI depth */
  .ui-star {
    position:absolute; width:6px; height:6px; border-radius:50%; background:linear-gradient(180deg,#fff,#ffdff8);
    filter: blur(6px) drop-shadow(0 0 10px rgba(255,255,255,0.45));
    opacity:0.14; transform:translate3d(0,0,0);
    animation: uiFloat 10s linear infinite;
    z-index:4;
    pointer-events:none;
  }
  @keyframes uiFloat {
    0% { transform: translateY(0) scale(1); opacity:0.10; }
    50% { transform: translateY(-20px) scale(1.24); opacity:0.28; }
    100% { transform: translateY(0) scale(1); opacity:0.10; }
  }

  /* dreamy CTA at bottom of card */
  .footer-cta { display:flex; gap:12px; justify-content:center; align-items:center; margin-top:6px; color:var(--muted); }

  /* accessibility: reduce motion */
  @media (prefers-reduced-motion: reduce){
    .breath-orb, .ui-star, #starfield { transition:none; animation:none; }
  }

</style>
</head>
<body>

<!-- star canvas (full page) -->
<canvas id="starfield" aria-hidden="true"></canvas>

<!-- soft overlays -->
<div class="nebula" aria-hidden="true"></div>
<div class="vignette" aria-hidden="true"></div>

<!-- some floating UI stars for depth -->
<div id="uiStarsContainer" aria-hidden="true"></div>

<!-- main content -->
<main class="stage" role="main">
  <section class="card" aria-label="Relaxation card with breathing and affirmations">

    <!-- Breathing left -->
    <div class="breath-wrap" aria-hidden="false">
      <h1 class="title">Stargaze & Breathe</h1>
      <p class="lead">A tiny universe made for Divanshi â€” inhale starlight, exhale all the noise.</p>

      <div class="breath-stage" aria-live="polite">
        <div class="breath-orb small" id="breathOrb" aria-hidden="false">
          <div class="orb-label" id="breathLabel">Ready</div>
        </div>
      </div>

      <div class="controls">
        <button class="btn" id="startBtn" aria-pressed="false">Start Breathing</button>
        <button class="btn secondary" id="stopBtn">Stop</button>
      </div>

      <div class="meta" id="cycleMeta">Cycle: 0 â€¢ Phase: idle â€¢ Time left: â€”</div>
      <div class="footer-cta small-muted">Tip: tap the starlit background to add a soft sparkle.</div>
    </div>

    <!-- Affirmations right -->
    <aside class="affirm-wrap" aria-hidden="false">
      <div class="affirm-card" role="region" aria-label="Gentle affirmations for Divanshi">
        <div class="affirm-text" id="affirmText">You are doing amazing, Divanshi ðŸ’›</div>
        <div class="small-muted">(changes every 5 seconds)</div>
      </div>

      <div class="affirm-card" style="min-height:80px; display:flex; align-items:center; justify-content:center;">
        <div style="display:flex; justify-content:center; gap:10px; flex-wrap:wrap;">
          <button class="btn secondary" id="prevAffirm">Previous</button>
          <button class="btn" id="pauseAffirm">Pause</button>
          <button class="btn secondary" id="nextAffirm">Next</button>
        </div>
      </div>
    </aside>

  </section>
</main>

<script>
/* ===========================
   STARFIELD â€” canvas based
   mobile-friendly density + DPR aware
   =========================== */
(function(){
  const canvas = document.getElementById('starfield');
  const ctx = canvas.getContext('2d');
  let width, height, stars = [];
  const rand = (min,max) => Math.random() * (max - min) + min;

  function makeStars(count) {
    stars = [];
    for (let i=0;i<count;i++){
      stars.push({
        x: Math.random() * width,
        y: Math.random() * height,
        r: Math.pow(Math.random(), 2) * (1.9 + Math.random()*0.6) + 0.3,
        baseAlpha: rand(0.25, 0.95),
        twinkleSpeed: rand(0.002, 0.012),
        phase: Math.random() * Math.PI * 2,
        hueShift: rand(-6, 18)
      });
    }
  }

  function resize(){
    const dpr = Math.max(1, devicePixelRatio || 1);
    width = canvas.width = innerWidth * dpr;
    height = canvas.height = innerHeight * dpr;
    canvas.style.width = innerWidth + 'px';
    canvas.style.height = innerHeight + 'px';
    ctx.setTransform(dpr,0,0,dpr,0,0);

    // density: reduce on small screens
    const baseArea = innerWidth * innerHeight;
    const densityDiv = innerWidth < 560 ? 8000 : innerWidth < 920 ? 7000 : 6000;
    const count = Math.max(60, Math.round(baseArea / densityDiv));
    makeStars(count);
  }

  function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    // background tint layer
    const g = ctx.createLinearGradient(0,0,0,innerHeight);
    g.addColorStop(0,'rgba(5,12,30,0.22)');
    g.addColorStop(1,'rgba(0,3,12,0.48)');
    ctx.fillStyle = g;
    ctx.fillRect(0,0,innerWidth,innerHeight);

    for (let s of stars){
      s.phase += s.twinkleSpeed * 60;
      const a = s.baseAlpha * (0.6 + 0.4 * Math.sin(s.phase));
      const cx = s.x, cy = s.y, r = s.r;
      const rad = ctx.createRadialGradient(cx, cy, 0, cx, cy, r*8);
      rad.addColorStop(0, `rgba(255,${240 + s.hueShift},${255},${a*0.92})`);
      rad.addColorStop(0.5, `rgba(255,255,255,${a*0.45})`);
      rad.addColorStop(1, `rgba(255,255,255,0)`);
      ctx.beginPath();
      ctx.fillStyle = rad;
      ctx.arc(cx, cy, r*8, 0, Math.PI*2);
      ctx.fill();

      ctx.beginPath();
      ctx.fillStyle = `rgba(255,255,255,${Math.min(1,a+0.14)})`;
      ctx.arc(cx, cy, r, 0, Math.PI*2);
      ctx.fill();
    }

    requestAnimationFrame(draw);
  }

  // subtle parallax on pointer move
  let mx = innerWidth/2, my = innerHeight/2;
  addEventListener('pointermove', (e)=>{ mx = e.clientX; my = e.clientY; });
  function parallaxStep(){
    const cx = innerWidth/2, cy = innerHeight/2;
    const dx = (mx - cx)/cx, dy = (my - cy)/cy;
    for (let s of stars){
      s.x += dx * (0.18 - Math.min(0.14, s.r / 12));
      s.y += dy * (0.18 - Math.min(0.14, s.r / 12));
    }
  }
  setInterval(parallaxStep, 800);

  // click to spawn sparkle
  addEventListener('click', (e)=>{
    for (let i=0;i<6;i++){
      stars.push({
        x: e.clientX + rand(-16,16),
        y: e.clientY + rand(-16,16),
        r: rand(0.6,2.4),
        baseAlpha: rand(0.8,1),
        twinkleSpeed: rand(0.02,0.06),
        phase: Math.random()*Math.PI*2,
        hueShift: rand(-6,18)
      });
    }
    // trim later
    setTimeout(()=>{ stars = stars.slice(0, Math.max(60, Math.round((innerWidth * innerHeight) / (innerWidth < 560 ? 8000 : 6000))); }, 2600);
  });

  addEventListener('resize', resize);
  resize();
  requestAnimationFrame(draw);
})();

/* ===========================
   UI DECOR: small floating star dots
   reduce on small screens
   =========================== */
(function(){
  const container = document.getElementById('uiStarsContainer');
  const count = innerWidth < 560 ? 4 : 8;
  for (let i=0;i<count;i++){
    const el = document.createElement('div');
    el.className = 'ui-star';
    el.style.left = (6 + Math.random()*88) + '%';
    el.style.top = (6 + Math.random()*88) + '%';
    el.style.opacity = (0.06 + Math.random()*0.24);
    el.style.transform = `scale(${0.7 + Math.random()*1.4})`;
    el.style.animationDelay = (Math.random()*6) + 's';
    container.appendChild(el);
  }
})();

/* ===========================
   BREATHING LOGIC (unchanged)
   =========================== */
(function(){
  const startBtn = document.getElementById('startBtn');
  const stopBtn = document.getElementById('stopBtn');
  const orb = document.getElementById('breathOrb');
  const label = document.getElementById('breathLabel');
  const meta = document.getElementById('cycleMeta');

  // Cycle settings (adjustable)
  const inhale = 4.5; // seconds
  const hold = 2; // seconds
  const exhale = 6; // seconds
  let running = false;
  let cycleCount = 0;
  let phase = 'idle';
  let timeLeft = 0;
  let timerId = null;

  function updateMeta(){
    meta.textContent = `Cycle: ${cycleCount} â€¢ Phase: ${phase} â€¢ Time left: ${timeLeft ? timeLeft.toFixed(1) + 's' : 'â€”'}`;
  }

  function start(){
    if (running) return;
    running = true;
    startBtn.setAttribute('aria-pressed','true');
    label.textContent = 'Inhale';
    cycleCount = 0;
    phase = 'inhale';
    timeLeft = inhale;
    orb.classList.remove('small'); orb.classList.add('big');
    updateMeta();
    step();
  }

  function stop(){
    running = false;
    startBtn.setAttribute('aria-pressed','false');
    label.textContent = 'Stopped';
    orb.classList.remove('big'); orb.classList.add('small');
    phase = 'idle'; timeLeft = 0; updateMeta();
    if (timerId) { clearTimeout(timerId); timerId = null; }
  }

  function step(){
    if (!running) return;
    if (phase === 'inhale'){
      label.textContent = 'Inhale';
      timeLeft = inhale; updateMeta();
      orb.classList.remove('small'); orb.classList.add('big');
      timerId = setTimeout(()=>{ phase = 'hold'; step(); }, inhale*1000);
    }
    else if (phase === 'hold'){
      label.textContent = 'Hold';
      timeLeft = hold; updateMeta();
      timerId = setTimeout(()=>{ phase = 'exhale'; step(); }, hold*1000);
    }
    else if (phase === 'exhale'){
      label.textContent = 'Exhale';
      timeLeft = exhale; updateMeta();
      orb.classList.remove('big'); orb.classList.add('small');
      timerId = setTimeout(()=>{ cycleCount += 1; phase = 'inhale'; step(); }, exhale*1000);
    }

    let interval = setInterval(()=>{
      if (!running){ clearInterval(interval); return; }
      timeLeft = Math.max(0, timeLeft - 0.1);
      updateMeta();
    }, 100);

    setTimeout(()=>{ clearInterval(interval); }, ((phase === 'inhale' ? inhale : phase === 'hold' ? hold : exhale) * 1000) + 80);
  }

  startBtn.addEventListener('click', start);
  stopBtn.addEventListener('click', stop);

  document.addEventListener('keydown',(e)=>{
    if (e.key === ' '){ e.preventDefault(); if (running) stop(); else start(); }
  });
  document.addEventListener('visibilitychange', ()=>{ if (document.hidden) stop(); });
})();

/* ===========================
   AFFIRMATIONS rotation (unchanged but accessible)
   =========================== */
(function(){
  const AFFIRMATIONS = [
    "You are doing amazing, Divanshi ðŸ’›",
    "Breathe in starlight, breathe out worries âœ¨",
    "Soft heart. Strong soul. Gentle days.",
    "You are loved, seen and enough â€” always.",
    "May your dreams be vast and kind.",
    "A universe of calm is always within you.",
    "Your presence is a gift â€” breathe it in.",
    "Small steps. Deep breaths. Golden days."
  ];

  const display = document.getElementById('affirmText');
  const prevBtn = document.getElementById('prevAffirm');
  const nextBtn = document.getElementById('nextAffirm');
  const pauseBtn = document.getElementById('pauseAffirm');

  let idx = 0, paused = false, timer = null;

  function show(i){
    i = (i + AFFIRMATIONS.length) % AFFIRMATIONS.length;
    idx = i;
    display.style.opacity = 0;
    setTimeout(()=>{ display.textContent = AFFIRMATIONS[i]; display.style.opacity = 1; }, 260);
  }

  function schedule(){
    if (timer) clearInterval(timer);
    if (!paused) timer = setInterval(()=>{ show(idx+1); }, 5000);
  }

  prevBtn.addEventListener('click', ()=>{ show(idx-1); schedule(); });
  nextBtn.addEventListener('click', ()=>{ show(idx+1); schedule(); });
  pauseBtn.addEventListener('click', ()=>{
    paused = !paused;
    pauseBtn.textContent = paused ? 'Resume' : 'Pause';
    if (paused){ if (timer) clearInterval(timer); timer = null; } else schedule();
  });

  show(0);
  schedule();
})();
</script>

</body>
</html>

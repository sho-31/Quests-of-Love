<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>üêæ Cozy Care ‚Äî Kitty Divi</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Handwritten header font -->
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">

  <style>
    /* extra small utilities not in tailwind for the breathing transition control */
    .breath-circle {
      border-radius: 9999px;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow: 0 10px 30px rgba(255, 182, 193, 0.22);
      will-change: transform, opacity;
      position: relative;
      overflow: visible;
    }

    /* center paw on circle */
    .paw-overlay {
      position:absolute;
      left:50%;
      top:50%;
      transform: translate(-50%, -50%);
      pointer-events:none;
    }

    /* small paw prints floating on exhale */
    .floating-paw {
      position: absolute;
      font-size: 18px;
      pointer-events: none;
      transform: translateY(0) scale(0.75);
      opacity: 0;
      transition: transform 1.2s ease-out, opacity 1.2s ease-out;
      will-change: transform, opacity;
    }

    /* affirmation fade classes (controlled from JS) */
    .aff-fade-in { opacity: 1; transform: translateY(0); transition: opacity .45s ease, transform .45s ease; }
    .aff-fade-out { opacity: 0; transform: translateY(6px); transition: opacity .45s ease, transform .45s ease; }

    /* subtle page background sparkle-ish (keeps main page feel) */
    body::after{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      background-image: radial-gradient(circle at 10% 20%, rgba(255,255,255,0.08) 0px, transparent 10px),
                        radial-gradient(circle at 80% 30%, rgba(255,255,255,0.06) 0px, transparent 8px),
                        radial-gradient(circle at 50% 80%, rgba(255,255,255,0.03) 0px, transparent 6px);
      mix-blend-mode: screen;
    }
  </style>
</head>
<body class="min-h-screen flex flex-col items-center bg-gradient-to-b from-[#ffe6f0] via-[#ffd1e8] to-[#fff0f5] text-[#d63384]">

  <!-- Header -->
  <header class="w-full max-w-3xl px-4 mt-6">
    <div class="bg-gradient-to-b from-[#fff6fb] to-[#fff0f6] rounded-xl shadow-md p-3 flex justify-center items-center">
      <h1 class="font-[Pacifico] text-[#222] text-3xl sm:text-4xl">üêæ Cozy Care</h1>
    </div>
  </header>

  <!-- Page container -->
  <main class="page w-full max-w-3xl px-4 mt-6 mb-10 flex flex-col gap-6">

    <!-- Playlist Card -->
    <section class="card bg-white/95 rounded-2xl p-4 shadow-lg">
      <div class="flex flex-col gap-2">
        <h2 class="text-xl font-semibold text-[#222] flex items-center gap-3">üéµ Soothing Playlist</h2>
        <p class="text-sm text-[#8a3b6e]">Gentle tunes to calm the heart. Play in Spotify or use the built-in player below.</p>

        <div class="mt-2 flex flex-col gap-3">
          <!-- Spotify embed (you can replace with your playlist id) -->
          <iframe class="w-full rounded-lg" style="min-height:84px;" src="https://open.spotify.com/embed/playlist/37i9dQZF1DWU0ScTcjJBdj" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>

          <!-- Fallback local audio (optional) -->
          <audio controls class="w-full rounded-md" id="localAudio">
            <!-- replace sample.mp3 with your own hosted mp3 if preferred -->
            <source src="sample.mp3" type="audio/mpeg">
            Your browser doesn't support audio playback.
          </audio>

          <div class="flex gap-3 justify-center mt-1">
            <button class="px-4 py-2 rounded-full bg-gradient-to-r from-[#ff99cc] to-[#ff66b2] text-white font-semibold shadow-sm" onclick="openPlaylist()">Open in Spotify</button>
            <button class="px-3 py-2 rounded-full bg-white border border-pink-200 text-[#ff4d9e] font-semibold shadow-sm" onclick="flashPlayer()">Focus</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Breathing Card -->
    <section class="card bg-white/95 rounded-2xl p-4 shadow-lg flex flex-col items-center">
      <h2 class="w-full text-left text-xl font-semibold text-[#222] flex items-center gap-3">üå¨ Breathing Exercise</h2>
      <p class="w-full text-left text-sm text-[#8a3b6e]">Follow the circle. Inhale 7s ‚Üí Hold 8s ‚Üí Exhale 4s. Repeat gently.</p>

      <div class="mt-4 w-full flex flex-col items-center gap-3 relative">
        <!-- breathing circle wrapper -->
        <div id="breathWrapper" class="breath-circle" style="width:220px; height:220px;">
          <!-- static paw overlay centered on circle (blue paw like your image) -->
          <div class="paw-overlay" aria-hidden="true">
            <!-- Inline SVG paw ‚Äî replace with your PNG if preferred -->
            <svg id="pawSVG" width="88" height="88" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
              <g fill="#3E5C9A">
                <ellipse cx="120" cy="80" rx="56" ry="72"/>
                <ellipse cx="200" cy="60" rx="58" ry="74"/>
                <ellipse cx="285" cy="80" rx="56" ry="72"/>
                <ellipse cx="360" cy="120" rx="48" ry="64"/>
                <path d="M256 160c-66 0-160 84-160 160 0 88 90 192 160 192s160-104 160-192c0-76-94-160-160-160z"/>
              </g>
            </svg>
          </div>
          <!-- placeholder content (keeps circle visually centered) -->
        </div>

        <!-- layer for floating paw prints during exhale -->
        <div id="pawLayer" class="w-full h-0 relative pointer-events-none" aria-hidden="true"></div>

        <div class="flex gap-3 mt-2">
          <button id="breathStart" class="px-4 py-2 rounded-full bg-gradient-to-r from-[#ff99cc] to-[#ff66b2] text-white font-semibold shadow-sm">Start</button>
          <button id="breathGuide" class="px-4 py-2 rounded-full bg-white border border-pink-200 text-[#ff4d9e] font-semibold shadow-sm">How to</button>
        </div>
      </div>
    </section>

    <!-- Affirmations Card -->
    <section class="card bg-white/95 rounded-2xl p-4 shadow-lg">
      <h2 class="text-xl font-semibold text-[#222] flex items-center gap-3">üí¨ Positive Affirmations</h2>
      <div class="mt-3">
        <div id="affirmationBox" class="w-full rounded-lg bg-gradient-to-r from-[#fff6fb] to-[#fff0f6] p-3">
          <div id="affirmText" class="text-center text-[#6a2b5a] text-base aff-fade-in">You are doing amazing, Divanshi üíõ</div>
        </div>
        <div class="mt-2 text-xs text-[#a64a87] text-center opacity-90">(automatically changes every 5 seconds)</div>
      </div>
    </section>

    <!-- REMOVED Cozy Kitty as requested - nothing here -->

  </main>

  <footer class="w-full max-w-3xl px-4 mb-8"></footer>

<script>
  /* ============ Helpers for playlist ============ */
  function openPlaylist(){
    window.open('https://open.spotify.com/playlist/37i9dQZF1DWU0ScTcjJBdj','_blank');
  }
  function flashPlayer(){
    const p = document.querySelector('iframe');
    if(!p) return;
    p.style.boxShadow = '0 24px 48px rgba(255,105,180,0.22)';
    setTimeout(()=> p.style.boxShadow = '', 700);
  }

  /* ============ Breathing logic (7s inhale, 8s hold, 4s exhale) ============ */
  const breathStartBtn = document.getElementById('breathStart');
  const breathWrapper = document.getElementById('breathWrapper');
  const pawLayer = document.getElementById('pawLayer');

  // durations in ms
  const inhaleMs = 7000;
  const holdMs = 8000;
  const exhaleMs = 4000;
  const cycleMs = inhaleMs + holdMs + exhaleMs;

  let breathing = false;
  let breathTimeout = null;

  // Set initial compact appearance
  breathWrapper.style.transform = 'scale(0.84)';

  function setScale(scale, durationMs){
    // Apply transform and transition duration dynamically
    breathWrapper.style.transition = `transform ${durationMs}ms cubic-bezier(.2,.9,.2,1), opacity ${durationMs}ms`;
    breathWrapper.style.transform = `scale(${scale})`;
  }

  // spawn floating paw prints on exhale
  function spawnFloatingPaws(){
    const count = 5;
    for(let i=0;i<count;i++){
      const span = document.createElement('span');
      span.className = 'floating-paw';
      span.textContent = 'üêæ';
      // choose random left within 30%..70% of container width
      const left = 20 + Math.random() * 60;
      span.style.left = left + '%';
      // start near circle vertical position
      span.style.top = '30px';
      pawLayer.appendChild(span);

      // force reflow then animate
      requestAnimationFrame(()=>{
        const dx = (-30 + Math.random() * 60); // horizontal drift
        const dy = -(80 + Math.random() * 40); // upward
        span.style.transform = `translate(${dx}px, ${dy}px) scale(1)`;
        span.style.opacity = '0';
      });

      // remove after animation
      setTimeout(()=> {
        try{ span.remove(); } catch(e){}
      }, 1500 + Math.random()*300);
    }
  }

  async function breathingCycle(){
    if(!breathing) return;
    try{
      // inhale -> expand
      setScale(1.18, inhaleMs);
      await new Promise(r => breathTimeout = setTimeout(r, inhaleMs));

      // hold -> keep expanded (we can reduce micro movement)
      setScale(1.18, 200); // tiny immediate
      await new Promise(r => breathTimeout = setTimeout(r, holdMs));

      // exhale -> contract and spawn paw prints
      setScale(0.78, exhaleMs);
      spawnFloatingPaws();
      await new Promise(r => breathTimeout = setTimeout(r, exhaleMs));

      // loop
      if(breathing) breathingCycle();
    }catch(e){}
  }

  breathStartBtn.addEventListener('click', () => {
    if (!breathing){
      breathing = true;
      breathStartBtn.textContent = 'Stop';
      breathingCycle();
    } else {
      breathing = false;
      breathStartBtn.textContent = 'Start';
      clearTimeout(breathTimeout);
      // return to restful scale
      setScale(0.84, 400);
    }
  });

  document.getElementById('breathGuide').addEventListener('click', () => {
    alert('Inhale for 7 seconds ‚Üí Hold for 8 seconds ‚Üí Exhale for 4 seconds. Repeat gently.');
  });

  /* ============ Affirmations autoroate (no click required) ============ */
  const affirmText = document.getElementById('affirmText');
  const affirmList = [
    "You are doing amazing, Divanshi üíõ",
    "You are loved and cherished üå∏",
    "Every breath you take brings peace üå¨",
    "You make tiny moments feel like magic ‚ú®",
    "You are exactly where you need to be üê±üíñ"
  ];
  let affIndex = 0;
  let affTimer = null;

  function showAff(index){
    // fade-out, change, fade-in
    affirmText.classList.remove('aff-fade-in');
    affirmText.classList.add('aff-fade-out');
    setTimeout(()=> {
      affirmText.textContent = affirmList[index];
      affirmText.classList.remove('aff-fade-out');
      affirmText.classList.add('aff-fade-in');
    }, 420);
  }

  function nextAff(){
    affIndex = (affIndex + 1) % affirmList.length;
    showAff(affIndex);
  }

  // start auto-rotation
  affTimer = setInterval(nextAff, 5000);

  // initialize visible state
  affirmText.classList.add('aff-fade-in');

  /* ============ Accessibility / tab visibility optimizations ============ */
  document.addEventListener('visibilitychange', () => {
    if (document.hidden){
      if (affTimer) clearInterval(affTimer);
    } else {
      if (!affTimer) affTimer = setInterval(nextAff, 5000);
    }
  });

  // ensure breath stops when leaving
  window.addEventListener('pagehide', () => {
    breathing = false;
    clearTimeout(breathTimeout);
  });

</script>
</body>
</html>

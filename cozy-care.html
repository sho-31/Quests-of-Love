<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>üêæ Cozy Care ‚Äî Kitty Divi</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">

  <style>
    /* --- Custom visuals on top of Tailwind --- */
    :root{
      --pink-1: #fff0f5;
      --pink-2: #ffe6f0;
      --accent-1: #ff69b4;
      --accent-2: #ff66b2;
      --muted: #8a3b6e;
    }

    body{
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      background: linear-gradient(180deg, var(--pink-2) 0%, rgba(255,220,235,0.6) 40%, var(--pink-1) 100%);
    }

    /* page container card look */
    .card {
      background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,250,253,0.95));
      border-radius: 18px;
      box-shadow: 0 12px 28px rgba(255,182,193,0.18);
      border: 1px solid rgba(255,220,230,0.6);
    }

    /* breathing circle baseline */
    .breath-circle {
      width: 230px;
      height: 230px;
      border-radius: 9999px;
      display:flex;
      align-items:center;
      justify-content:center;
      background: radial-gradient(circle at 40% 35%, rgba(255,245,250,1), #ffeef6 40%, #ffddeb 100%);
      box-shadow: 0 8px 26px rgba(255,182,193,0.14), inset 0 3px 12px rgba(255,255,255,0.4);
      position: relative;
      transition: transform 7000ms cubic-bezier(.2,.9,.2,1), opacity 400ms ease;
      will-change: transform;
      overflow: visible;
    }

    /* resting scale */
    .breath-rest { transform: scale(0.82); }
    /* inhale -> big scale */
    .breath-inhale { transform: scale(1.18); transition-duration: 7000ms; }
    /* exhale -> contract */
    .breath-exhale { transform: scale(0.78); transition-duration: 4000ms; }

    /* paw overlay image centered on circle */
    .paw-overlay {
      position:absolute;
      left:50%;
      top:50%;
      transform: translate(-50%,-50%);
      width: 96px;
      height: 96px;
      display:flex;
      align-items:center;
      justify-content:center;
      pointer-events:none;
    }
    .paw-overlay img { width:100%; height:100%; object-fit:contain; }

    /* floating paw prints for exhale */
    .floating-paw {
      position:absolute;
      font-size:18px;
      pointer-events:none;
      transform: translateY(0) scale(0.75);
      opacity: 0;
      transition: transform 1200ms ease-out, opacity 1200ms ease-out;
      will-change: transform, opacity;
      filter: drop-shadow(0 6px 12px rgba(255,182,193,0.20));
    }

    /* affirmation fade classes (JS toggles) */
    .aff-in { opacity:1; transform: translateY(0); transition: all 420ms ease; }
    .aff-out { opacity:0; transform: translateY(8px); transition: all 420ms ease; }

    /* subtle global sparkle overlay similar to main page */
    body::after{
      content:"";
      position: fixed;
      inset: 0;
      pointer-events: none;
      background-image:
        radial-gradient(circle at 10% 12%, rgba(255,255,255,0.06) 0px, transparent 8px),
        radial-gradient(circle at 85% 28%, rgba(255,255,255,0.04) 0px, transparent 6px),
        radial-gradient(circle at 50% 82%, rgba(255,255,255,0.03) 0px, transparent 5px);
      mix-blend-mode: screen;
    }

    /* responsive adjustments */
    @media (max-width:420px){
      .breath-circle { width: 170px; height: 170px; }
      .paw-overlay { width: 74px; height: 74px; }
    }
  </style>
</head>
<body class="min-h-screen flex flex-col items-center text-[#9f2c6a]">

  <!-- header -->
  <header class="w-full max-w-3xl px-4 pt-6">
    <div class="card p-3 flex justify-center items-center bg-gradient-to-b from-[#fff6fb] to-[#fff0f6]">
      <h1 class="font-[Pacifico] text-3xl sm:text-4xl text-[#2a1224]">üêæ Cozy Care</h1>
    </div>
  </header>

  <!-- main content -->
  <main class="w-full max-w-3xl px-4 mt-6 mb-10 flex flex-col gap-6">

    <!-- Playlist Card -->
    <section class="card p-5">
      <h2 class="text-xl font-semibold text-[#22121d] flex items-center gap-3">üéµ Soothing Playlist</h2>
      <p class="text-sm text-[#7b2f5b] mt-1">Gentle tunes to calm the heart. Use Spotify or the local audio player below.</p>

      <div class="mt-4 flex flex-col gap-3">
        <iframe class="w-full rounded-lg" style="min-height:84px;" src="https://open.spotify.com/embed/playlist/37i9dQZF1DWU0ScTcjJBdj" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>

        <audio id="localAudio" controls class="w-full rounded-md">
          <source src="sample.mp3" type="audio/mpeg">
          Your browser doesn't support audio playback.
        </audio>

        <div class="mt-2 flex gap-3 justify-center">
          <button onclick="openPlaylist()" class="px-5 py-2 rounded-full bg-gradient-to-r from-[#ff99cc] to-[#ff66b2] text-white font-semibold shadow-sm">Open in Spotify</button>
          <button onclick="flashPlayer()" class="px-4 py-2 rounded-full border border-pink-200 text-[#ff4d9e] bg-white font-semibold">Focus</button>
        </div>
      </div>
    </section>

    <!-- Breathing Card -->
    <section class="card p-5 flex flex-col items-center">
      <h2 class="w-full text-left text-xl font-semibold text-[#22121d] flex items-center gap-3">üå¨ Breathing Exercise</h2>
      <p class="w-full text-left text-sm text-[#7b2f5b] mt-1">Follow the circle ‚Äî inhale 7s ‚Üí hold 8s ‚Üí exhale 4s. Repeat gently.</p>

      <div class="mt-6 flex flex-col items-center gap-4 w-full">
        <div id="circle" class="breath-circle breath-rest" role="img" aria-label="Breathing circle">
          <!-- paw image centered -->
          <div class="paw-overlay" aria-hidden="true">
            <img src="paw.png" alt="paw" id="centerPaw" />
          </div>
        </div>

        <!-- paw prints layer -->
        <div id="pawLayer" class="w-full h-0 relative pointer-events-none"></div>

        <div class="mt-4 flex gap-3">
          <button id="btnStart" class="px-6 py-2 rounded-full bg-gradient-to-r from-[#ff99cc] to-[#ff66b2] text-white font-semibold shadow-sm">Start</button>
          <button id="btnHow" class="px-5 py-2 rounded-full border border-pink-200 text-[#ff4d9e] bg-white font-semibold">How to</button>
        </div>
      </div>
    </section>

    <!-- Affirmations Card -->
    <section class="card p-5">
      <h2 class="text-xl font-semibold text-[#22121d] flex items-center gap-3">üí¨ Positive Affirmations</h2>
      <div class="mt-3">
        <div id="affirmBox" class="rounded-lg bg-gradient-to-r from-[#fff6fb] to-[#fff0f6] p-3">
          <div id="affirmText" class="text-center text-[#6a2b5a] text-base aff-in">You are doing amazing, Divanshi üíõ</div>
        </div>
        <div class="mt-2 text-xs text-[#a64a87] text-center">(automatically changes every 5 seconds)</div>
      </div>
    </section>

  </main>

  <footer class="w-full max-w-3xl px-4 mb-8"></footer>

<script>
/* ===== Playlist helpers ===== */
function openPlaylist() {
  window.open('https://open.spotify.com/playlist/37i9dQZF1DWU0ScTcjJBdj', '_blank');
}
function flashPlayer() {
  const iframe = document.querySelector('iframe');
  if(!iframe) return;
  iframe.style.boxShadow = '0 20px 48px rgba(255,105,180,0.2)';
  setTimeout(() => iframe.style.boxShadow = '', 900);
}

/* ===== Breathing timings =====
   Inhale: 7000ms
   Hold : 8000ms
   Exhale: 4000ms
*/
const inhaleMs = 7000;
const holdMs = 8000;
const exhaleMs = 4000;

const circle = document.getElementById('circle');
const btnStart = document.getElementById('btnStart');
const btnHow = document.getElementById('btnHow');
const pawLayer = document.getElementById('pawLayer');

let breathActive = false;
let breathTimer = null;

function setCircleState(state) {
  // remove all three classes then add right one
  circle.classList.remove('breath-rest','breath-inhale','breath-exhale');
  if (state === 'rest') circle.classList.add('breath-rest');
  if (state === 'inhale') {
    circle.classList.add('breath-inhale');
    // set CSS transition duration accordingly (already handled in CSS)
  }
  if (state === 'exhale') circle.classList.add('breath-exhale');
}

// spawn paw prints that float upwards on exhale
function spawnPaws() {
  const count = 5;
  for (let i=0;i<count;i++){
    const el = document.createElement('div');
    el.className = 'floating-paw';
    el.textContent = 'üêæ';
    // position near center horizontally
    const leftPercent = 40 + Math.random()*20; // 40%..60%
    el.style.left = leftPercent + '%';
    // start slightly below center visually
    el.style.top = '30px';
    pawLayer.appendChild(el);

    // trigger animation in next frame
    requestAnimationFrame(() => {
      const dx = (-30 + Math.random()*60); // horizontal drift px
      const dy = -(90 + Math.random()*40); // upward px
      el.style.transform = `translate(${dx}px, ${dy}px) scale(1)`;
      el.style.opacity = '0';
    });

    setTimeout(()=> {
      try { el.remove(); } catch(e){}
    }, 1500 + Math.random()*400);
  }
}

async function breatheLoop() {
  if (!breathActive) return;
  // Inhale: expand
  setCircleState('inhale');
  await new Promise(res => breathTimer = setTimeout(res, inhaleMs));
  if (!breathActive) return;

  // Hold: keep expanded (no change)
  // keep same scale; just wait
  await new Promise(res => breathTimer = setTimeout(res, holdMs));
  if (!breathActive) return;

  // Exhale: contract & spawn paw prints
  setCircleState('exhale');
  spawnPaws();
  await new Promise(res => breathTimer = setTimeout(res, exhaleMs));
  if (!breathActive) return;

  // small rest state to give a gentle feel
  setCircleState('rest');
  await new Promise(res => breathTimer = setTimeout(res, 300));
  if (!breathActive) return;

  // loop again
  breatheLoop();
}

btnStart.addEventListener('click', () => {
  if (!breathActive) {
    breathActive = true;
    btnStart.textContent = 'Stop';
    breatheLoop();
  } else {
    breathActive = false;
    btnStart.textContent = 'Start';
    clearTimeout(breathTimer);
    setCircleState('rest');
  }
});

btnHow.addEventListener('click', () => {
  alert('Breathe: Inhale 7 seconds ‚Üí Hold 8 seconds ‚Üí Exhale 4 seconds. Repeat gently.');
});

/* ===== Affirmations auto-rotate (no click required) ===== */
const affirmText = document.getElementById('affirmText');
const affirmList = [
  "You are doing amazing, Divanshi üíõ",
  "You are loved and cherished üå∏",
  "Every breath you take brings peace üå¨",
  "You make tiny moments feel like magic ‚ú®",
  "You are exactly where you need to be üíó"
];
let affIndex = 0;
let affInterval = null;

function showAff(idx) {
  affirmText.classList.remove('aff-in'); 
  affirmText.classList.add('aff-out');
  setTimeout(()=> {
    affirmText.textContent = affirmList[idx];
    affirmText.classList.remove('aff-out');
    affirmText.classList.add('aff-in');
  }, 420);
}

function nextAff() {
  affIndex = (affIndex + 1) % affirmList.length;
  showAff(affIndex);
}

affInterval = setInterval(nextAff, 5000);

/* pause rotations when tab hidden to save CPU */
document.addEventListener('visibilitychange', () => {
  if (document.hidden) {
    if (affInterval) { clearInterval(affInterval); affInterval = null; }
  } else {
    if (!affInterval) affInterval = setInterval(nextAff, 5000);
  }
});

/* Ensure breathing stops when leaving page */
window.addEventListener('pagehide', () => {
  breathActive = false;
  clearTimeout(breathTimer);
});

/* Safety: verify paw.png presence; if missing, show console note */
window.addEventListener('load', () => {
  const img = document.getElementById('centerPaw');
  img.addEventListener('error', () => {
    console.warn('paw.png failed to load. Make sure paw.png is placed in the same folder as cozy-care.html and is named exactly "paw.png".');
  });
});
</script>
</body>
</html>

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üêæ Cozy Care ‚Äî Kitty Divi</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">

  <style>
    /* Dreamy custom styles on top of Tailwind */
    :root{
      --p1: #fff0f5;
      --p2: #ffe6f0;
      --accentA: #ff79b4;
      --accentB: #ff5fa3;
      --muted: #8a3b6e;
    }

    html,body{height:100%; margin:0;}
    body{
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: radial-gradient(circle at 20% 10%, rgba(255,245,250,0.6), transparent 8%),
                  radial-gradient(circle at 80% 70%, rgba(255,230,240,0.55), transparent 10%),
                  linear-gradient(180deg, var(--p2) 0%, #ffd9eb 40%, var(--p1) 100%);
      color:#57123d;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      display:flex;
      flex-direction:column;
      align-items:center;
      padding:18px;
      box-sizing:border-box;
    }

    /* header */
    header {
      width:100%;
      max-width:920px;
      margin-bottom:12px;
    }
    .header-card {
      background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,246,250,0.95));
      border-radius: 16px;
      padding: 12px 14px;
      display:flex;
      justify-content:center;
      align-items:center;
      box-shadow: 0 14px 36px rgba(255,140,190,0.14);
      border: 1px solid rgba(255,220,230,0.8);
    }
    h1 {
      margin:0;
      font-family: 'Pacifico', cursive;
      color:#2b1422;
      font-size: clamp(1.4rem, 4vw, 2.4rem);
      letter-spacing:0.4px;
    }

    /* page container */
    .page {
      width:100%;
      max-width:920px;
      display:flex;
      flex-direction:column;
      gap:18px;
      align-items:stretch;
    }

    /* glassy card style */
    .card {
      border-radius: 18px;
      padding: 18px;
      background: linear-gradient(180deg, rgba(255,255,255,0.96), rgba(255,250,253,0.96));
      box-shadow: 0 18px 44px rgba(255,150,185,0.12);
      border: 1px solid rgba(255,220,230,0.6);
      transition: transform .28s ease, box-shadow .28s ease;
    }
    .card:hover{ transform: translateY(-6px); box-shadow: 0 26px 60px rgba(255,150,185,0.16); }

    .muted { color: var(--muted); }

    /* playlist */
    .player-iframe { width:100%; min-height:86px; border-radius:12px; border:none; }

    /* fancy pill buttons */
    .pill-primary {
      background: linear-gradient(90deg, var(--accentA), var(--accentB));
      color:white;
      padding:10px 18px;
      border-radius:999px;
      font-weight:700;
      box-shadow: 0 8px 26px rgba(255,105,180,0.16);
      border:none;
    }
    .pill-ghost {
      padding:9px 14px;
      border-radius:999px;
      background:white;
      border:1px solid rgba(255,200,220,0.7);
      color:var(--accentB);
      font-weight:700;
    }

    /* breathing circle */
    .breath-wrap { display:flex; flex-direction:column; align-items:center; gap:14px; width:100%; }
    .breath-circle {
      width: 240px;
      height: 240px;
      border-radius:50%;
      background: radial-gradient(circle at 35% 30%, rgba(255,255,255,1), rgba(255,240,245,0.8) 35%, rgba(255,230,240,1) 70%);
      box-shadow: inset 0 10px 30px rgba(255,255,255,0.7), 0 18px 48px rgba(255,170,200,0.12);
      display:flex; align-items:center; justify-content:center;
      position:relative;
      transition: transform 7000ms cubic-bezier(.2,.9,.2,1), opacity 300ms ease;
      will-change: transform, opacity;
      overflow: visible;
    }
    .breath-small { transform: scale(0.78); }
    .breath-big { transform: scale(1.18); transition-duration:7000ms; }
    .breath-contract { transform: scale(0.78); transition-duration:4000ms; }

    /* centered paw image on top of circle */
    .paw-overlay {
      position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
      width:120px; height:120px; display:flex; align-items:center; justify-content:center;
      pointer-events:none;
      filter: drop-shadow(0 12px 22px rgba(0,0,0,0.07));
    }
    .paw-overlay img { width:100%; height:100%; object-fit:contain; display:block; }

    /* floating tiny sparkles */
    .sparkle {
      position: absolute;
      width:6px; height:6px; border-radius:50%;
      background: rgba(255,255,255,0.85);
      filter: blur(0.4px);
      opacity: 0.7;
      box-shadow: 0 0 8px rgba(255,220,240,0.8);
      will-change: transform, opacity;
    }

    /* floating paw prints during exhale */
    .floating-paw {
      position:absolute;
      pointer-events:none;
      font-size:18px;
      transform: translateY(0) scale(0.8);
      opacity:0;
      transition: transform 1200ms ease-out, opacity 1200ms ease-out;
      will-change: transform, opacity;
      filter: drop-shadow(0 6px 12px rgba(255,150,185,0.14));
    }

    /* affirmation fade */
    .aff-in { opacity:1; transform: translateY(0); transition: all .45s ease; }
    .aff-out { opacity:0; transform: translateY(8px); transition: all .45s ease; }

    /* responsive */
    @media (max-width:420px){
      .breath-circle { width:170px; height:170px; }
      .paw-overlay { width:90px; height:90px; }
    }
  </style>
</head>
<body>

  <header class="header-card">
    <h1>üêæ Cozy Care</h1>
  </header>

  <main class="page">

    <!-- Playlist -->
    <section class="card">
      <h2 class="text-lg font-semibold">üéµ Soothing Playlist</h2>
      <p class="text-sm muted mt-1">A small collection of calm songs ‚Äî open in Spotify or use the player below.</p>

      <div class="mt-4 flex flex-col gap-3">
        <iframe class="player-iframe rounded-lg" src="https://open.spotify.com/embed/playlist/37i9dQZF1DWU0ScTcjJBdj" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>

        <audio id="localAudio" controls class="w-full rounded-md">
          <source src="sample.mp3" type="audio/mpeg">
          Your browser doesn't support audio playback.
        </audio>

        <div class="mt-2 flex items-center justify-center gap-3">
          <button class="pill-primary" onclick="openPlaylist()">Open in Spotify</button>
          <button class="pill-ghost" onclick="flashPlayer()">Focus</button>
        </div>
      </div>
    </section>

    <!-- Breathing -->
    <section class="card">
      <h2 class="text-lg font-semibold">üå¨ Breathing Exercise</h2>
      <p class="text-sm muted mt-1">Follow the circle ‚Äî inhale 7s ‚Üí hold 8s ‚Üí exhale 4s. Repeat gently.</p>

      <div class="mt-6 breath-wrap">
        <div id="breathCircle" class="breath-circle breath-small" role="img" aria-label="Breathing circle">
          <!-- paw image centered on the circle -->
          <div class="paw-overlay">
            <img src="paw.png" id="centerPaw" alt="paw"/>
          </div>
        </div>

        <!-- layer for paw floats & sparkles -->
        <div id="animLayer" class="w-full relative" style="height:0;"></div>

        <div class="mt-4 flex gap-3">
          <button id="btnStart" class="pill-primary">Start</button>
          <button id="btnGuide" class="pill-ghost">How to</button>
        </div>
      </div>
    </section>

    <!-- Affirmations -->
    <section class="card">
      <h2 class="text-lg font-semibold">üí¨ Positive Affirmations</h2>
      <div class="mt-3">
        <div class="rounded-lg bg-gradient-to-r from-[#fff6fb] to-[#fff0f6] p-3">
          <div id="affirmText" class="text-center text-[#6a2b5a] text-base aff-in">You are doing amazing, Divanshi üíõ</div>
        </div>
        <div class="mt-2 text-xs text-[#a64a87] text-center">(automatically changes every 5 seconds)</div>
      </div>
    </section>

  </main>

  <script>
    /* ===== Helpers for playlist ===== */
    function openPlaylist(){
      window.open('https://open.spotify.com/playlist/37i9dQZF1DWU0ScTcjJBdj', '_blank');
    }
    function flashPlayer(){
      const iframe = document.querySelector('iframe');
      if(!iframe) return;
      iframe.style.boxShadow = '0 18px 48px rgba(255,140,190,0.22)';
      setTimeout(()=> iframe.style.boxShadow = '', 900);
    }

    /* ===== Dreamy sparkles (background micro-animations) ===== */
    const animLayer = document.getElementById('animLayer');
    // small subtle sparkles distributed around circle
    for(let i=0;i<12;i++){
      const s = document.createElement('div');
      s.className = 'sparkle';
      const left = 20 + Math.random()*60; // percent within card
      const top = 10 + Math.random()*40;
      s.style.left = left + '%';
      s.style.top = top + '%';
      const size = 4 + Math.random()*6;
      s.style.width = s.style.height = size + 'px';
      s.style.opacity = 0.5 + Math.random()*0.5;
      animLayer.appendChild(s);
      // float animation
      (function(el){
        const dx = (Math.random()-0.5)*40;
        const dy = (Math.random()-0.5)*40;
        function tick(){
          el.animate([
            { transform: 'translate(0,0)', opacity: el.style.opacity },
            { transform: `translate(${dx}px, ${dy}px)`, opacity: 0.2 }
          ], { duration: 4000 + Math.random()*6000, direction: 'alternate', iterations: Infinity, easing: 'ease-in-out' });
        }
        tick();
      })(s);
    }

    /* ===== Breathing logic (Inhale 7s, Hold 8s, Exhale 4s) ===== */
    const inhaleMs = 7000, holdMs = 8000, exhaleMs = 4000;
    const breathCircle = document.getElementById('breathCircle');
    const btnStart = document.getElementById('btnStart');
    const btnGuide = document.getElementById('btnGuide');

    let breathing = false;
    let breathTimer = null;

    function setStateExpand(duration){
      // set transition duration to match inhale
      breathCircle.style.transitionDuration = duration + 'ms';
      breathCircle.classList.remove('breath-small','breath-contract','breath-big');
      breathCircle.classList.add('breath-big');
    }
    function setStateHold(){
      // keep same (no change)
      breathCircle.style.transitionDuration = '200ms';
      breathCircle.classList.remove('breath-small','breath-contract','breath-big');
      breathCircle.classList.add('breath-big');
    }
    function setStateExhale(duration){
      breathCircle.style.transitionDuration = duration + 'ms';
      breathCircle.classList.remove('breath-small','breath-contract','breath-big');
      breathCircle.classList.add('breath-contract');
    }
    function setStateRest(){
      breathCircle.style.transitionDuration = '400ms';
      breathCircle.classList.remove('breath-small','breath-contract','breath-big');
      breathCircle.classList.add('breath-small');
    }

    function spawnFloatingPaws(){
      // spawn 5 small paw emojis that float upward & fade
      for(let i=0;i<5;i++){
        const p = document.createElement('div');
        p.className = 'floating-paw';
        p.textContent = 'üêæ';
        // random around center
        p.style.left = (45 + (Math.random()-0.5)*20) + '%';
        p.style.top = '18px';
        animLayer.appendChild(p);
        // animate in next frame
        requestAnimationFrame(() => {
          const dx = (-40 + Math.random()*80); // px
          const dy = -(90 + Math.random()*40);
          p.style.transform = `translate(${dx}px, ${dy}px) scale(1)`;
          p.style.opacity = '0';
        });
        setTimeout(()=> { try{ p.remove(); }catch(e){} }, 1500 + Math.random()*400);
      }
    }

    async function breatheLoop(){
      if(!breathing) return;
      // inhale
      setStateExpand(inhaleMs);
      await new Promise(r => breathTimer = setTimeout(r, inhaleMs));
      if(!breathing) return;
      // hold
      setStateHold();
      await new Promise(r => breathTimer = setTimeout(r, holdMs));
      if(!breathing) return;
      // exhale
      setStateExhale(exhaleMs);
      spawnFloatingPaws();
      await new Promise(r => breathTimer = setTimeout(r, exhaleMs));
      if(!breathing) return;
      // tiny rest
      setStateRest();
      await new Promise(r => breathTimer = setTimeout(r, 300));
      if(!breathing) return;
      breatheLoop();
    }

    btnStart.addEventListener('click', () => {
      if(!breathing){
        breathing = true;
        btnStart.textContent = 'Stop';
        breatheLoop();
      } else {
        breathing = false;
        btnStart.textContent = 'Start';
        clearTimeout(breathTimer);
        setStateRest();
      }
    });

    btnGuide.addEventListener('click', () => {
      alert('Breathe gently:\nInhale ‚Äî 7 seconds\nHold ‚Äî 8 seconds\nExhale ‚Äî 4 seconds\nRepeat.');
    });

    /* ===== Affirmations auto-rotate ===== */
    const affirmText = document.getElementById('affirmText');
    const affirmList = [
      "You are doing amazing, Divanshi üíõ",
      "You are loved and cherished üå∏",
      "Every breath you take brings peace üå¨",
      "You make tiny moments feel like magic ‚ú®",
      "You are exactly where you need to be üíó"
    ];
    let ai = 0;
    setInterval(()=> {
      ai = (ai + 1) % affirmList.length;
      // fade out/in
      affirmText.classList.remove('aff-in');
      affirmText.classList.add('aff-out');
      setTimeout(()=> {
        affirmText.textContent = affirmList[ai];
        affirmText.classList.remove('aff-out');
        affirmText.classList.add('aff-in');
      }, 420);
    }, 5000);

    /* ===== Ensure paw image exists & scale nicely ===== */
    const centerPaw = document.getElementById('centerPaw');
    centerPaw.addEventListener('error', ()=> {
      console.warn('paw.png failed to load ‚Äî ensure paw.png sits next to cozy-care.html and is named exactly paw.png');
    });

    // on load set restful scale
    window.addEventListener('load', ()=> {
      setStateRest();
    });

    // cleanup when leaving
    window.addEventListener('pagehide', ()=> {
      breathing = false;
      clearTimeout(breathTimer);
    });
  </script>
</body>
</html>
